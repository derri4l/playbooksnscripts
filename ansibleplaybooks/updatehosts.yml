# This Ansible playbook updates Proxmox hosts by upgrading packages and cleaning up unnecessary files. It also displays the OS and kernel information for each host.

- name: Proxmox Updates
  hosts: proxmox
  become: yes
  gather_facts: yes

  tasks:
    - name: Update Proxmox packages
      apt:
        update_cache: yes
        upgrade: dist
        autoremove: yes
        autoclean: yes
    - name: Show OS and kernel
      debug:
        msg: "{{ inventory_hostname }} â†’ {{ ansible_distribution }} {{ ansible_distribution_version }} ({{ ansible_kernel }})"